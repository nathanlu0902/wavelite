{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nmodule.exports = function (req, time) {\n\tif (req.timeoutTimer) { return req; }\n\n\tvar host = req._headers ? (' to ' + req._headers.host) : '';\n\n\treq.timeoutTimer = setTimeout(function timeoutHandler() {\n\t\treq.abort();\n\t\tvar e = new Error('Connection timed out on request' + host);\n\t\te.code = 'ETIMEDOUT';\n\t\treq.emit('error', e);\n\t}, time);\n\n\t// Set additional timeout on socket - in case if remote\n\t// server freeze after sending headers\n\treq.setTimeout(time, function socketTimeoutHandler() {\n\t\treq.abort();\n\t\tvar e = new Error('Socket timed out on request' + host);\n\t\te.code = 'ESOCKETTIMEDOUT';\n\t\treq.emit('error', e);\n\t});\n\n\tfunction clear() {\n\t\tif (req.timeoutTimer) {\n\t\t\tclearTimeout(req.timeoutTimer);\n\t\t\treq.timeoutTimer = null;\n\t\t}\n\t}\n\n\treturn req\n\t\t.on('response', clear)\n\t\t.on('error', clear);\n};\n"]}